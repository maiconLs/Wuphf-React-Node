{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thema\\\\Documents\\\\Project\\\\frontend\\\\src\\\\pages\\\\EditUser\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport api from '../../services/api';\nimport Header from '../../components/index';\nimport avatar from '../../assets/avatar.png';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { FiUpload } from \"react-icons/fi\";\nimport './edituser.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditUser() {\n  _s();\n\n  const [user, setUser] = useState({});\n  const [preview, setPreview] = useState();\n  const [loading, setLoading] = useState(false);\n  const [token] = useState(localStorage.getItem('token') || '');\n  useEffect(() => {\n    api.get('/users/checkuser', {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)} `\n      }\n    }).then(response => {\n      setUser(response.data);\n    });\n  }, [token]);\n\n  function handleChange(e) {\n    setUser({ ...user,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  function onFileChange(e) {\n    setPreview(e.target.files[0]);\n    setUser({ ...user,\n      [e.target.name]: e.target.files[0]\n    });\n  }\n\n  const handleSubmit = async e => {\n    setLoading(true);\n    e.preventDefault();\n    const formData = new FormData();\n    const userFormData = Object.keys(user).forEach(key => formData.append(key, user[key]));\n    formData.append('user', JSON.stringify(userFormData));\n    console.log(userFormData);\n    await api.patch(`/users/edit/${user._id}`, formData, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)}`,\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      toast.success(JSON.stringify(response.data.message));\n      console.log(response.data);\n      setLoading(false);\n      return response.data;\n    }).catch(error => {\n      toast.error(JSON.stringify(error.response.data.message));\n      console.log(error);\n      setLoading(false);\n      return error.response.data;\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"formUser\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Editar perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(FiUpload, {\n              color: \"#FFF\",\n              size: 25\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), user.image || preview ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: preview ? URL.createObjectURL(preview) : `${process.env.REACT_APP_API}/images/users/${user.image}`,\n            alt: user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: avatar,\n            alt: \"Avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 18\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"edit\",\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"image\",\n            type: \"file\",\n            onChange: onFileChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            value: user.name || '',\n            type: \"text\",\n            placeholder: \"Digite seu nome\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"username\",\n            value: user.username || '',\n            type: \"text\",\n            placeholder: \"Digite um nome de utilizador \",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            value: user.email || '',\n            type: \"email\",\n            placeholder: \"Digite seu email\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"password\",\n            type: \"password\",\n            placeholder: \"Digite uma senha\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"confirmpassword\",\n            type: \"password\",\n            placeholder: \"Confirme sua senha\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: loading ? 'Carregando...' : 'Enviar'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditUser, \"EJfypsqPRNxDFXtQeNsj6UlBBmQ=\");\n\n_c = EditUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditUser\");","map":{"version":3,"sources":["C:/Users/thema/Documents/Project/frontend/src/pages/EditUser/index.tsx"],"names":["useEffect","useState","api","Header","avatar","toast","FiUpload","EditUser","user","setUser","preview","setPreview","loading","setLoading","token","localStorage","getItem","get","headers","Authorization","JSON","parse","then","response","data","handleChange","e","target","name","value","onFileChange","files","handleSubmit","preventDefault","formData","FormData","userFormData","Object","keys","forEach","key","append","stringify","console","log","patch","_id","success","message","catch","error","image","URL","createObjectURL","process","env","REACT_APP_API","username","email"],"mappings":"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","sourcesContent":["import { FormEvent, useEffect, useState } from \"react\"\r\nimport api from '../../services/api';\r\n\r\nimport Header from '../../components/index';\r\nimport avatar from '../../assets/avatar.png'\r\n\r\nimport {toast} from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.min.css'; \r\n\r\nimport { FiUpload } from \"react-icons/fi\";\r\n\r\nimport './edituser.scss';\r\n\r\ninterface IUser {\r\n  name: string;\r\n  username: string;\r\n  email: string;\r\n  _id: string;\r\n  image?: string;\r\n  [key: number]: string;\r\n}\r\n\r\nexport default function EditUser(){\r\n  const [user, setUser] = useState({} as IUser)\r\n  const [preview, setPreview] = useState()\r\n  const [loading, setLoading] = useState(false)\r\n  const [token] = useState(localStorage.getItem('token') || '')\r\n\r\n  useEffect(() => {\r\n    api.get('/users/checkuser',{\r\n      headers:{\r\n        Authorization: `Bearer ${JSON.parse(token)} `,\r\n      },\r\n    })\r\n    .then((response) => {\r\n      setUser(response.data)\r\n\r\n    })\r\n   }, [token])\r\n\r\n   function handleChange(e: any){\r\n    setUser({...user, [e.target.name]: e.target.value})\r\n    \r\n   }\r\n\r\n   function onFileChange(e: any){\r\n     setPreview(e.target.files[0])\r\n     setUser({...user, [e.target.name]: e.target.files[0]})\r\n   }\r\n\r\n   const handleSubmit = async (e: any) => {\r\n     setLoading(true)\r\n    e.preventDefault()\r\n\r\n    const formData = new FormData()\r\n\r\n    const userFormData = Object.keys(user).forEach((key) =>  \r\n      formData.append(key, user[key]  ),\r\n    )\r\n\r\n    formData.append('user', JSON.stringify(userFormData) )\r\n    console.log(userFormData)\r\n\r\n    await api.patch(`/users/edit/${user._id}`, formData, {\r\n      headers:{\r\n        Authorization: `Bearer ${JSON.parse(token)}`,\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    })\r\n    .then((response) => {\r\n      toast.success(JSON.stringify(response.data.message) )\r\n      console.log(response.data)\r\n      setLoading(false)\r\n      return response.data\r\n    })\r\n\r\n    .catch((error) => {\r\n      toast.error(JSON.stringify(error.response.data.message) )\r\n      console.log(error)\r\n      setLoading(false)\r\n      return error.response.data\r\n    })\r\n   }\r\n\r\n  return(\r\n    <div >\r\n      <Header/>\r\n      <div className=\"formUser\">\r\n         <div>\r\n          <h1>Editar perfil</h1>\r\n          <div>\r\n\r\n              <span>\r\n                <FiUpload color=\"#FFF\" size={25} />\r\n              </span>\r\n\r\n              {(user.image || preview) ? (\r\n                <img\r\n                  src={\r\n                    preview ?\r\n                    URL.createObjectURL(preview) :\r\n                    `${process.env.REACT_APP_API}/images/users/${user.image}`\r\n                  }\r\n                  alt={user.name}\r\n                />\r\n              ): <img src={avatar} alt=\"Avatar\"/>}\r\n              </div>\r\n            \r\n            <form className=\"edit\" onSubmit={handleSubmit}>\r\n        \r\n              <input name=\"image\" type=\"file\"  onChange={onFileChange}/>\r\n              <input name=\"name\" value={user.name || ''} type=\"text\" placeholder=\"Digite seu nome\"  onChange={handleChange}/>\r\n              <input name=\"username\" value={user.username || ''} type=\"text\" placeholder=\"Digite um nome de utilizador \"  onChange={handleChange}/>\r\n              <input name=\"email\" value={user.email || ''} type=\"email\" placeholder=\"Digite seu email\"  onChange={handleChange}/>\r\n              <input name=\"password\" type=\"password\" placeholder=\"Digite uma senha\"  onChange={handleChange}/>\r\n              <input name=\"confirmpassword\" type=\"password\" placeholder=\"Confirme sua senha\"  onChange={handleChange}/>\r\n              <input type=\"submit\" value={loading ? 'Carregando...' : 'Enviar'}/>\r\n            </form>\r\n          </div>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}