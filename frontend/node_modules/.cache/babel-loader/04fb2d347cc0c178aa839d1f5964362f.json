{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thema\\\\Documents\\\\Project\\\\frontend\\\\src\\\\pages\\\\EditUser\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport useAuth from \"../\";\nimport api from '../../services/api';\nimport Header from '../../components/index';\nimport avatar from '../../assets/avatar.png';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { FiUpload } from \"react-icons/fi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditUser() {\n  _s();\n\n  const [user, setUser] = useState({});\n  const [preview, setPreview] = useState();\n  const [loading, setLoading] = useState();\n  const [token] = useState(localStorage.getItem('token') || '');\n  useEffect(() => {\n    api.get('/users/checkuser', {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)} `\n      }\n    }).then(response => {\n      setUser(response.data);\n    });\n  }, [token]);\n\n  function handleChange(e) {\n    setUser({ ...user,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  function onFileChange(e) {\n    setPreview(e.target.files[0]);\n    setUser({ ...user,\n      [e.target.name]: e.target.files[0]\n    });\n  }\n\n  const handleSubmit = async e => {\n    setLoading(true);\n    e.preventDefault();\n    const formData = new FormData();\n    const userFormData = Object.keys(user).forEach(key => formData.append(key, user[key]));\n    formData.append('user', userFormData);\n    console.log(userFormData);\n    await api.patch(`/users/edit/${user._id}`, formData, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)}`,\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      toast.success(JSON.stringify(response.data.message));\n      console.log(response.data);\n      setLoading(false);\n      return response.data;\n    }).catch(error => {\n      toast.error(JSON.stringify(error.response.data.message));\n      console.log(error);\n      setLoading(false);\n      return error.response.data;\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Editar perfil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(FiUpload, {\n            color: \"#FFF\",\n            size: 25\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this), user.image || preview ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: preview ? URL.createObjectURL(preview) : `${process.env.REACT_APP_API}/images/users/${user.image}`,\n          alt: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          src: avatar,\n          alt: \"Avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"edit\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"image\",\n          type: \"file\",\n          onChange: onFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"name\",\n          value: user.name || '',\n          type: \"text\",\n          placeholder: \"Digite seu nome\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"username\",\n          value: user.username || '',\n          type: \"text\",\n          placeholder: \"Digite um nome de utilizador \",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          value: user.email || '',\n          type: \"email\",\n          placeholder: \"Digite seu email\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          type: \"password\",\n          placeholder: \"Digite uma senha\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"confirmpassword\",\n          type: \"password\",\n          placeholder: \"Confirme sua senha\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: loading ? 'Carregando...' : 'Enviar'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditUser, \"EdP5ui5ANMuvND91jFu1W8AsF64=\");\n\n_c = EditUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditUser\");","map":{"version":3,"sources":["C:/Users/thema/Documents/Project/frontend/src/pages/EditUser/index.js"],"names":["useEffect","useState","useAuth","api","Header","avatar","toast","FiUpload","EditUser","user","setUser","preview","setPreview","loading","setLoading","token","localStorage","getItem","get","headers","Authorization","JSON","parse","then","response","data","handleChange","e","target","name","value","onFileChange","files","handleSubmit","preventDefault","formData","FormData","userFormData","Object","keys","forEach","key","append","console","log","patch","_id","success","stringify","message","catch","error","image","URL","createObjectURL","process","env","REACT_APP_API","username","email"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\"\r\n\r\nimport useAuth from \"../\"\r\n\r\nimport api from '../../services/api';\r\n\r\nimport Header from '../../components/index';\r\nimport avatar from '../../assets/avatar.png'\r\n\r\nimport {toast} from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.min.css'; \r\n\r\nimport { FiUpload } from \"react-icons/fi\";\r\n\r\nexport default function EditUser(){\r\n  const [user, setUser] = useState({})\r\n  const [preview, setPreview] = useState()\r\n  const [loading, setLoading] = useState()\r\n  const [token] = useState(localStorage.getItem('token') || '')\r\n\r\n  useEffect(() => {\r\n    api.get('/users/checkuser',{\r\n      headers:{\r\n        Authorization: `Bearer ${JSON.parse(token)} `,\r\n      },\r\n    })\r\n    .then((response) => {\r\n      setUser(response.data)\r\n\r\n    })\r\n   }, [token])\r\n\r\n   function handleChange(e){\r\n    setUser({...user, [e.target.name]: e.target.value})\r\n    \r\n   }\r\n\r\n   function onFileChange(e){\r\n     setPreview(e.target.files[0])\r\n     setUser({...user, [e.target.name]: e.target.files[0]})\r\n   }\r\n\r\n   const handleSubmit = async (e) => {\r\n     setLoading(true)\r\n    e.preventDefault()\r\n\r\n    const formData = new FormData()\r\n\r\n    const userFormData = Object.keys(user).forEach((key) =>  \r\n      formData.append(key, user[key]),\r\n    )\r\n\r\n    formData.append('user', userFormData)\r\n    console.log(userFormData)\r\n\r\n    await api.patch(`/users/edit/${user._id}`, formData, {\r\n      headers:{\r\n        Authorization: `Bearer ${JSON.parse(token)}`,\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    })\r\n    .then((response) => {\r\n      toast.success(JSON.stringify(response.data.message) )\r\n      console.log(response.data)\r\n      setLoading(false)\r\n      return response.data\r\n    })\r\n\r\n    .catch((error) => {\r\n      toast.error(JSON.stringify(error.response.data.message) )\r\n      console.log(error)\r\n      setLoading(false)\r\n      return error.response.data\r\n    })\r\n   }\r\n\r\n  return(\r\n    <div>\r\n      <Header/>\r\n         <div>\r\n          <h1>Editar perfil</h1>\r\n          <div>\r\n\r\n              <span>\r\n                <FiUpload color=\"#FFF\" size={25} />\r\n              </span>\r\n\r\n              {(user.image || preview) ? (\r\n                <img\r\n                  src={\r\n                    preview ?\r\n                    URL.createObjectURL(preview) :\r\n                    `${process.env.REACT_APP_API}/images/users/${user.image}`\r\n                  }\r\n                  alt={user.name}\r\n                />\r\n              ): <img src={avatar} alt=\"Avatar\"/>}\r\n              </div>\r\n            \r\n            <form className=\"edit\" onSubmit={handleSubmit}>\r\n        \r\n              <input name=\"image\" type=\"file\"  onChange={onFileChange}/>\r\n              <input name=\"name\" value={user.name || ''} type=\"text\" placeholder=\"Digite seu nome\"  onChange={handleChange}/>\r\n              <input name=\"username\" value={user.username || ''} type=\"text\" placeholder=\"Digite um nome de utilizador \"  onChange={handleChange}/>\r\n              <input name=\"email\" value={user.email || ''} type=\"email\" placeholder=\"Digite seu email\"  onChange={handleChange}/>\r\n              <input name=\"password\" type=\"password\" placeholder=\"Digite uma senha\"  onChange={handleChange}/>\r\n              <input name=\"confirmpassword\" type=\"password\" placeholder=\"Confirme sua senha\"  onChange={handleChange}/>\r\n              <button type=\"submit\">{loading ? 'Carregando...' : 'Enviar'}</button>\r\n            </form>\r\n          </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}